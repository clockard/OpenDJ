<?xml version="1.0" encoding="utf-8"?>
<adm:managed-object name="file-based-debug-log-publisher"
  plural-name="file-based-debug-log-publishers"
  package="org.opends.server.admin.std" extends="debug-log-publisher"
  xmlns:adm="http://www.opends.org/admin"
  xmlns:ldap="http://www.opends.org/admin-ldap">
  <adm:synopsis>
    <adm:user-friendly-plural-name />
    publish debug messages to the file system.
  </adm:synopsis>
  <adm:profile name="ldap">
    <ldap:object-class>
      <ldap:oid>1.3.6.1.4.1.26027.1.2.27</ldap:oid>
      <ldap:name>ds-cfg-file-based-debug-logger</ldap:name>
      <ldap:superior>ds-cfg-debug-logger</ldap:superior>
    </ldap:object-class>
  </adm:profile>
  <adm:property-override name="java-implementation-class">
    <adm:default-behavior>
      <adm:defined>
        <adm:value>
          org.opends.server.loggers.debug.TextDebugLogPublisher
        </adm:value>
      </adm:defined>
    </adm:default-behavior>
  </adm:property-override>
  <adm:property name="asynchronous" mandatory="true">
    <adm:synopsis>
      Indicate whether the
      <adm:user-friendly-name />
      will publish records asyncronously.
    </adm:synopsis>
    <adm:syntax>
      <adm:boolean />
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.358</ldap:oid>
        <ldap:name>ds-cfg-asynchronous-writes</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="queue-size">
    <adm:synopsis>
      The maximum number of log records that can be stored in the
      asynchronous queue.
    </adm:synopsis>
    <adm:default-behavior>
      <adm:defined>
        <adm:value>
          5000
        </adm:value>
      </adm:defined>
    </adm:default-behavior>
    <adm:syntax>
      <adm:integer />
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.378</ldap:oid>
        <ldap:name>dscfg-log-queue-size</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="log-file" mandatory="true">
    <adm:synopsis>
      The file name to use for the log files generated by the
      <adm:user-friendly-name />. The path to the file is relative to the server
      root.
    </adm:synopsis>
    <adm:syntax>
      <adm:string />
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.59</ldap:oid>
        <ldap:name>ds-cfg-log-file</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="log-file-mode" mandatory="true">
    <adm:synopsis>
      The UNIX permissions of the log files created by this
      <adm:user-friendly-name />.
    </adm:synopsis>
    <adm:syntax>
      <adm:string>
        <adm:pattern>
          <adm:regex>
            ^([0-7][0-7][0-7])$
          </adm:regex>
          <adm:synopsis>
            An valid UNIX mode string. The mode string must contain three
            digits between zero and seven.
          </adm:synopsis>
        </adm:pattern>
      </adm:string>
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.359</ldap:oid>
        <ldap:name>ds-cfg-log-file-mode</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="time-interval">
    <adm:synopsis>
      This property specifies the interval to check whether
      the log files need to be rotated.
    </adm:synopsis>
    <adm:default-behavior>
      <adm:defined>
        <adm:value>
          5s
        </adm:value>
      </adm:defined>
    </adm:default-behavior>
    <adm:syntax>
      <adm:duration base-unit="ms" lower-limit="1"/>
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.109</ldap:oid>
        <ldap:name>ds-cfg-thread-time-interval</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="buffer-size">
    <adm:synopsis>
      This property specifies the log file buffer size.
    </adm:synopsis>
    <adm:default-behavior>
      <adm:defined>
        <adm:value>
          64kb
        </adm:value>
      </adm:defined>
    </adm:default-behavior>
    <adm:syntax>
      <adm:size lower-limit="1" />
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.110</ldap:oid>
        <ldap:name>ds-cfg-buffer-size</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="auto-flush">
    <adm:synopsis>
      This property specifies whether to flush the writer after every log
      record. If the asynchronous writes option is used, the writer will
      be flushed after all the log records in the queue are written.
    </adm:synopsis>
    <adm:default-behavior>
      <adm:defined>
        <adm:value>
          true
        </adm:value>
      </adm:defined>
    </adm:default-behavior>
    <adm:syntax>
      <adm:boolean />
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.360</ldap:oid>
        <ldap:name>ds-cfg-writer-auto-flush</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="append">
    <adm:synopsis>
      This property specifies whether to append to existing log files.
    </adm:synopsis>
    <adm:default-behavior>
      <adm:defined>
        <adm:value>
          true
        </adm:value>
      </adm:defined>
    </adm:default-behavior>
    <adm:syntax>
      <adm:boolean />
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.361</ldap:oid>
        <ldap:name>ds-cfg-writer-append</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="rotation-policy-dn" multi-valued="true">
    <adm:synopsis>
      The retention policy to use for the <adm:user-friendly-name />. When
      multiple policies are used, rotation will occur if any policy's conditions
      are met.
    </adm:synopsis>
    <adm:default-behavior>
      <adm:alias>
        <adm:synopsis>
          No rotation policy is used and log rotation will not occur.
        </adm:synopsis>
      </adm:alias>
    </adm:default-behavior>
    <adm:syntax>
      <adm:dn>
        <adm:base>
          cn=Log Rotation Policies,cn=config
        </adm:base>
      </adm:dn>
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.90</ldap:oid>
        <ldap:name>ds-cfg-rotation-policy-dn</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
  <adm:property name="retention-policy-dn" multi-valued="true">
    <adm:synopsis>
      The retention policy to use for the <adm:user-friendly-name />. When
      multiple policies are used, log files will be cleaned when any of the
      policy's conditions are met
    </adm:synopsis>
    <adm:default-behavior>
      <adm:alias>
        <adm:synopsis>
          No rentation policy is used and log files will never be cleaned.
        </adm:synopsis>
      </adm:alias>
    </adm:default-behavior>
    <adm:syntax>
      <adm:dn>
        <adm:base>
          cn=Log Retention Policies,cn=config
        </adm:base>
      </adm:dn>
    </adm:syntax>
    <adm:profile name="ldap">
      <ldap:attribute>
        <ldap:oid>1.3.6.1.4.1.26027.1.1.91</ldap:oid>
        <ldap:name>ds-cfg-retention-policy-dn</ldap:name>
      </ldap:attribute>
    </adm:profile>
  </adm:property>
</adm:managed-object>
