<!DOCTYPE html PUBLIC "-//Tigris//DTD XHTML 1.0 Transitional//EN" "http://style.tigris.org/nonav/tigris_transitional.dtd">
<html>
<head>
<link rel="SHORTCUT ICON" href="https://opends.dev.java.net/public/images/opends_favicon.gif">
<style type="text/css"> 
/* <![CDATA[ */
 @import "/branding/css/tigris.css";
 @import "/branding/css/inst.css";
 /* ]]> */
</style>
<link rel="stylesheet" type="text/css" href="/branding/css/print.css" media="print" />
<link rel="stylesheet" href="../../css/opends.css" type="text/css">
<title>OpenDS Directory Server - Quick Reference Guide</title>
</head>
<body>
<table class="tertmasttable" width="100%" cellspacing="0">
  <tbody>
    <tr>
      <td><div class="collectionheader">Quick Reference Guide</div></td>
      <td width="10%"><a href="https://opends.dev.java.net/"><img src="../../images/opends_logo_sm.png" alt="OpenDS Logo" width="104" height="33" border="0" align="middle"></a> </td>
    </tr>
  </tbody>
</table>
<hr noshade size="1" >
    <ul>
      <li><a href="#moreinfo">Getting More Information about OpenDS</a></li>
      <li><a href="#setup">Installing, Configuring, and Uninstalling the Directory Server</a></li>
      <li><a href="#startstop">Starting and Stopping the Directory Server</a></li>
      <li><a href="#importexport">Importing and Exporting Data</a></li>
      <li><a href="#backuprestore">Backing Up and Restoring Data</a></li>
      <li><a href="#ldaptools">Communicating with the Directory Server via LDAP</a></li>
      <li><a href="#othertools">Other Tools Provided with the Directory Server</a></li>
      <li><a href="#samplecommands">Sample Command-Line Usages</a></li>
    </ul>

    <br>
    <a name="moreinfo"></a>
    <b>Getting More Information about OpenDS</b>
    <br><br>
    This page provides basic information about performing common tasks within
    OpenDS.  You can find a more complete set of documentation at
    <a href="https://opends.dev.java.net/public/docs/index.html">https://opends.dev.java.net/public/docs/index.html</a>.

    <br><br>
    When using any of our command-line utilities, you may use the
    "<code>--help</code>" option to obtain usage information.

    <br><br>
    You may also request help using the
    <a href="mailto:users@opends.dev.java.net">users@opends.dev.java.net</a>
    or 
    <a href="mailto:dev@opends.dev.java.net">dev@opends.dev.java.net</a> mailing lists.

    <br><br><br>

    <a name="setup"></a>
    <b>Installing, Uninstalling, and Configuring the Directory Server</b>
    <br><br>
    There are several options available for downloading, installing, and
    configuring the OpenDS Directory Server.
    <br><br>
    The simplest approach is to use our graphical installer based on Java Web
    Start technology.  To do that,
    <a href="http://www.opends.org/install/QuickSetup.jnlp">use this link</a>.
    For more information on installing the server with this tool,
    <a href="https://opends.dev.java.net/public/docs/user-docs/QuickSetup-guide.html">see this page</a>.

    <br><br>
    You may also download our latest
    <a href="https://opends.dev.java.net/servlets/ProjectDocumentList?folderID=5700&expandFolder=5700&folderID=0">weekly build</a>,
    which has been subjected to at least basic testing, or the latest
    <a href="http://www.opends.org/daily-builds/latest/">daily build</a>,
    which may contain more recent updates but has not necessarily received the
    same level of testing as a weekly build.  When using a daily or weekly
    build, simply unzip the archive into the desired location on the filesystem
    and run the <a href="cli/setup.html"><code>setup</code></a> utility.  This
    will launch the same setup tool that is used by the Java Web Start
    installer, with the exception that it will configure the existing
    installation rather than downloading and installing a new server, and it
    has the ability to work with just a command-line interface if no graphical
    environment is available or desired by running it with the
    "<code>--cli</code>" argument.

    <br><br>
    OpenDS does not currently have an uninstall utility.  To remove the product
    from your system, simply stop the server as described below and remove the
    directory in which it has been installed.

    <br><br><br>

    <a name="startstop"></a>
    <b>Starting and Stopping the Directory Server</b>
    <br><br>
    To start the OpenDS server, use the
    <a href="cli/start-ds.html"><code>start-ds</code></a> utility.  If this is
    used without any arguments, it will start the server in the background.  If
    If a "<code>--nodetach</code>" command-line option is given, then it will
    continue running in the foreground without detaching from the console.

    <br><br>
    To stop the server, use the
    <a href="cli/stop-ds.html"><code>stop-ds</code></a> tool.  On UNIX-based
    systems, this tool has two modes of operation.  If no command-line
    arguments are provided and a PID file exists, then the script will use a
    kill command to stop the existing server installation.  If one or more
    command-line arguments are provided, or if no PID file exists, then the
    script will attempt to communicate with the server over LDAP to request
    that it stop running.  On Windows systems, it is currently only possible to
    request a shutdown over LDAP.

    <br><br>
    Note that the <code>stop-ds</code> utility also provides the ability to
    restart the server by using the "<code>--restart</code>" option.  This will
    issue an LDAP request to the server to perform an "in-core" restart in
    which the JVM remains running but the server will completely reinitialize
    itself.  To restart the server in a manner that will terminate the JVM, use
    the <code>stop-ds</code> option to stop the server and then
    <code>start-ds</code> to start it again.

    <br><br>
    If the Directory Server is running in the foreground, then the
    <code>stop-ds</code> utility may be used to stop it as described above,
    but it may also be stopped by pressing <code>Ctrl+C</code> on either
    UNIX-based or Windows systems.

    <br><br><br>

    <a name="importexport"></a>
    <b>Importing, Exporting, and Generating Data</b>
    <br><br>
    In order to load the server with a large amount of data, you should use the
    LDIF import mechanism.  If you have an existing LDIF file, then you may use
    the <a href="cli/import-ldif.html"><code>import-ldif</code></a> tool.
    In order to export data from the server, use the
    <a href="cli/export-ldif.html"><code>export-ldif</code></a>.

    <br><br>
    If you would like to import a large amount of sample data into the server
    but do not have an existing LDIF file, you may use the MakeLDIF utility to
    generate data in LDIF form.  This may be done with the
    <a href="cli/makeldif.html"><code>makeldif</code></a> tool.  This utility
    generates data based on a template that describes how the characteristics
    of the data to create.  This LDIF file can then be imported into the server
    using the <code>import-ldif</code> tool.  Alternately, the
    <code>import-ldif</code> tool can directly load dynamically-generated data
    using a MakeLDIF template without requiring the intermediate step of
    writing the LDIF data to a file.

    <br><br><br>

    <a name="backuprestore"></a>
    <b>Backing Up and Restoring Data</b>
    <br><br>
    In order to back up the data stored in an OpenDS Directory Server, you
    should use the <a href="cli/backup.html"><code>backup</code></a> tool.
    This may be used to back up an individual backend or all backends at the
    same time.  In order to restore a backup, you should use the
    <a href="cli/restore.html"><code>restore</code></a> tool.  At present, this
    may only be used to restore one backend at a time.

    <br><br><br>

    <a name="ldaptools"></a>
    <b>Communicating with the Directory Server via LDAP</b>
    <br><br>
    Because OpenDS is based on open standard protocols, any LDAPv2 or LDAPv3
    client should be able to communicate with the server.  However, OpenDS does
    come with a number of LDAP client tools for performing various types of
    operations.  They all reside in the <code>bin</code> directory and include:
    <ul>
      <li><a href="cli/ldapsearch.html"><code>ldapsearch</code></a> -- Used to
          perform LDAP search operations.</li>
      <li><a href="cli/ldapmodify.html"><code>ldapmodify</code></a> -- Used to
          perform LDAP add, modify, delete, and modify DN operations.</li>
      <li><a href="cli/ldappasswordmodify.html"><code>ldappasswordmodify</code></a>
          -- Used to perform LDAP password modify extended operations.</li>
      <li><a href="cli/ldapcompare.html"><code>ldapcompare</code></a> -- Used
          to perform LDAP compare operations.</li>
      <li><a href="cli/ldapdelete.html"><code>ldapdelete</code></a> -- Used to
          perform LDAP delete operations.</li>
    </ul>

    If you are familiar with the versions of these utilities provided with the
    Sun Java System Directory Server, then you will find that the OpenDS
    versions are very similar.  Some capabilities available in the Sun Java
    System Diretory Server are not yet implemented in OpenDS, and OpenDS does
    include some additional capabilities not supported in the Sun Java System
    Directory Server.

    <br><br><br>

    <a name="othertools"></a>
    <b>Other Tools Provided with the Directory Server</b>
    <br><br>
    Other administrative tools provided with OpenDS include:
    <ul>
      <li><a href="cli/encode-password.html"><code>encode-password</code></a>
          -- Used to list the available password storage schemes in the server,
          encode a clear-text password using a specified password storage
          scheme, or determine whether a given clear-text password matches an
          encoded password.</li>
      <li><a href="cli/verify-index.html"><code>verify-index</code></a> -- Used
          to perform validation on a JE backend to determine whether the index
          contents are in sync with the data stored in that backend.</li>
      <li><a href="cli/ldifsearch.html"><code>ldifsearch</code></a> -- Used to
          process search operations in an LDIF file, much like the
          <code>ldapsearch</code> utility can perform searches over LDAP.</li>
      <li><a href="cli/ldifmodify.html"><code>ldifmodify</code></a> -- Used to
          process add, delete, and modify operations in an LDIF file, much
          like the <code>ldapmodify</code> utility can perform these operations
          over LDAP.</li>
      <li><a href="cli/ldif-diff.html"><code>ldif-diff</code></a> -- Used to
          examine two LDIF files and determine the differences between them,
          outputing the result in LDIF change format.</li>
    </ul>

    <br><br>

    <a name="samplecommands"></a>
    <b>Sample Command-Line Usages</b>
    <br><br>
    All of the tools provided with the OpenDS Directory Server have usage
    information available by running them with "<code>--help</code>" argument,
    and more detailed documentation for these utilities can be found
    <a href="cli/index.html">on this page</a>.  However, in many cases sample
    usages can be enough to illustrate the most important concepts.  Note that
    all of the sample usages below are for UNIX-based systems, but in most
    cases the only difference for Windows systems would be to replace a
    forward slash with a backslash in the path to the command (adding the
    ".bat" extension will work but should not be required).  Also note that
    each sample command should be written on a single line, regardless of any
    line wrapping that may have been enforced by your web browser.

    <ul>
      <li>
        To start the OpenDS Directory Server and have it run in the background:
        <blockquote>
          <code>bin/start-ds</code>
        </blockquote>
      </li>

      <li>
        To start the OpenDS Directory Server and have it run in the foreground:
        <blockquote>
          <code>bin/start-ds --nodetach</code>
        </blockquote>
      </li>

      <li>
        To stop the OpenDS Directory Server running on the local machine by
        killing the process (UNIX-based systems only):
        <blockquote>
          <code>bin/stop-ds</code>
        </blockquote>
      </li>

      <li>
        To stop the OpenDS Directory Server running on a local or remote system
        via an LDAP request:
        <blockquote>
          <code>bin/stop-ds --host directory.example.com --port 389 
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                --stopReason "The reason I'm stopping the server"</code>
        </blockquote>
      </li>

      <li>
        To restart the OpenDS Directory Server running on a local or remote
        system via an LDAP request:
        <blockquote>
          <code>bin/stop-ds --host directory.example.com --port 389 
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                --restart --stopReason "The reason I'm restarting the server"</code>
        </blockquote>
      </li>

      <li>
        To import data contained in an LDIF file into an OpenDS backend and
        keep a record of any entries that are rejected:
        <blockquote>
          <code>bin/import-ldif --backendID userRoot
                --ldifFile /path/to/data.ldif
                --rejectFile /path/to/rejects.ldif</code>
        </blockquote>
      </li>

      <li>
        To import data generated from a MakeLDIF template into an OpenDS
        backend:
        <blockquote>
          <code>bin/import-ldif --backendID userRoot
                --templateFile example.template --randomSeed 0</code>
        </blockquote>
      </li>

      <li>
        To export data from an OpenDS backend to an LDIF file:
        <blockquote>
          <code>bin/export-ldif --backendID userRoot
                --ldifFile /path/to/export.ldif</code>
        </blockquote>
      </li>

      <li>
        To generate LDIF data based on a MakeLDIF template:
        <blockquote>
          <code>bin/makeldif --templateFile example.template
                --ldifFile /path/to/data.ldif --randomSeed 0</code>
        </blockquote>
      </li>

      <li>
        To perform a full backup of all data in all backends:
        <blockquote>
          <code>bin/backup --backupAll --backupDirectory bak</code>
        </blockquote>
      </li>

      <li>
        To perform an incremental backup based on the latest backup for the
        userRoot backend:
        <blockquote>
          <code>bin/backup --backendID userRoot --backupDirectory bak/userRoot
                --incremental</code>
        </blockquote>
      </li>

      <li>
        To list all of the backups contained in a given backup directory:
        <blockquote>
          <code>bin/restore --listBackups --backupDirectory bak/userRoot</code>
        </blockquote>
      </li>

      <li>
        To restore the latest backup from a given backup directory:
        <blockquote>
          <code>bin/restore --backupDirectory bak/userRoot</code>
        </blockquote>
      </li>

      <li>
        To perform an unauthenticated LDAP search operation to retrieve the
        "dc=example,dc=com" entry:
        <blockquote>
          <code>bin/ldapsearch --host directory.example.com --port 389
                --baseDN "dc=example,dc=com" --scope base
                "(objectClass=*)"</code>
        </blockquote>
      </li>

      <li>
        To perform an authenticated LDAP search operation to retrieve all
        entries below "dc=example,dc=com" for users in the marketing
        department:
        <blockquote>
          <code>bin/ldapsearch --host directory.example.com --port 389
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                --baseDN "dc=example,dc=com" --scope sub "(ou=Marketing)"</code>
        </blockquote>
      </li>

      <li>
        To use LDAP add/delete/modify operations to apply a set of changes
        contained in an LDIF file:
        <blockquote>
          <code>bin/ldapmodify --host directory.example.com --port 389
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                --filename /tmp/changes.ldif</code>
        </blockquote>
      </li>

      <li>
        To use the LDAP password modify operation to allow a user to change his
        own password:
        <blockquote>
          <code>bin/ldappasswordmodify --host directory.example.com --port 389
                --authzID "u:john.doe"
                --currentPasswordFile /tmp/currentpassword
                --newPasswordFile /tmp/newpassword</code>
        </blockquote>
      </li>

      <li>
        To use the LDAP password modify operation to allow an administrator to
        change the password for another user:
        <blockquote>
          <code>bin/ldappasswordmodify --host directory.example.com --port 389
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                --authzID "u:john.doe" --newPasswordFile /tmp/newpassword</code>
        </blockquote>
      </li>

      <li>
        To use the LDAP compare operation to determine whether the
        "dc=example,dc=com" entry has a description value of "test":
        <blockquote>
          <code>bin/ldapcompare --host directory.example.com --port 389
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                "description:testS" dc=example,dc=com</code>
        </blockquote>
      </li>

      <li>
        To use the LDAP delete operation to remove the
        "cn=test,dc=example,dc=com" entry:
        <blockquote>
          <code>bin/ldapdelete --host directory.example.com --port 389
                --bindDN "cn=Directory Manager" --bindPasswordFile /tmp/password
                cn=test,dc=example,dc=com</code>
        </blockquote>
      </li>

      <li>
        To encode a password contained in a file using the SSHA password
        storage scheme:
        <blockquote>
          <code>bin/encode-password --storageScheme SSHA
                --clearPasswordFile /tmp/testpassword</code>
        </blockquote>
      </li>

      <li>
        To determine whether a given clear-text password matches an encoded
        value (NOTE:  The encoded value must not include the scheme name in
        curly braces).
        <blockquote>
          <code>bin/encode-password --storageScheme SSHA
                --clearPassword testpassword
                --encodedPassword "bHpfvQDcHqiH8ghGz3MXxJC8qSFFV2LCt2vrpQ=="</code>
        </blockquote>
      </li>

      <li>
        To ensure that all entries below "dc=example,dc=com" are properly
        indexed:
        <blockquote>
          <code>bin/verify-index --baseDN dc=example,dc=com</code>
        </blockquote>
      </li>

      <li>
        To ensure that all keys in the uid index refer to valid entries that
        actually contain the correct data for those keys:
        <blockquote>
          <code>bin/verify-index --baseDN dc=example,dc=com --index uid
                --clean</code>
        </blockquote>
      </li>

      <li>
        To search an LDIF file to find all users below "dc=example,dc=com" that
        have a last name of "Smith":
        <blockquote>
          <code>bin/ldifsearch --ldifFile /path/to/data.ldif
                --baseDN "dc=example,dc=com" --scope sub "(sn=Smith)"</code>
        </blockquote>
      </li>

      <li>
        To apply a set of changes to an LDIF file:
        <blockquote>
          <code>bin/ldifmodify --sourceLDIF /path/to/source.ldif
                --changesLDIF /path/to/changes.ldif
                --targetLDIF /path/to/target.ldif</code>
        </blockquote>
      </li>

      <li>
        To identify the differences between two LDIF files:
        <blockquote>
          <code>bin/ldif-diff --sourceLDIF /path/to/source.ldif
                --targetLDIF /path/to/target.ldif
                --outputLDIF /path/to/changes.ldif</code>
        </blockquote>
      </li>
    </ul>
  </body>
</html>

