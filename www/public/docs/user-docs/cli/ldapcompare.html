<!DOCTYPE html PUBLIC "-//Tigris//DTD XHTML 1.0 Transitional//EN" "http://style.tigris.org/nonav/tigris_transitional.dtd">
<html>
<head>
<link rel="SHORTCUT ICON" href="https://opends.dev.java.net/public/images/opends_favicon.gif">
<style type="text/css"> 
/* <![CDATA[ */
 @import "/branding/css/tigris.css";
 @import "/branding/css/inst.css";
 /* ]]> */
</style>
<link rel="stylesheet" type="text/css" href="/branding/css/print.css" media="print" />
<link rel="stylesheet" href="../../../css/opends.css" type="text/css">
<title>OpenDS Directory Server - Quick Reference Guide</title>
</head>
<body>
<table class="tertmasttable" width="100%" cellspacing="0">
  <tbody>
    <tr>
      <td><div class="collectionheader">Command Line Usage Guide</div></td>
      <td width="10%"><a href="https://opends.dev.java.net/"><img src="../../../images/opends_logo_sm.png" alt="OpenDS Logo" width="104" height="33" border="0" align="middle"></a> </td>
    </tr>
  </tbody>
</table>
<hr noshade size="1" >
    <div align="right"><a href="index.html">Return to Command List</a></div>
    <div class="secpageheader">The ldapcompare Utility</div>

    <br>
    The <code>ldapcompare</code> utility may be used to issue LDAP compare
    requests to the Directory Server.  Compare requests may be used to
    determine whether a given entry or set of entries have a particular
    attribute-value combination.  The only information returned from a
    successful compare operation is an indication as to whether the comparison
    evaluated to true or false -- no other information about the entry is
    provided.

    <br><br>
    The command-line usage for this tool is as follows:
    <blockquote>
      <code>ldapsearch {options} attribute:value [dn ...]</code>
    </blockquote>

    The named arguments are listed below.  After all of the named arguments
    have been provided, the next argument should be the attribute value
    assertion with the attribute name separated from the value by a colon.  All
    remaining trailing arguments should be the DNs of the entries for which to
    perform the compare operations.  If the <code>--filename</code> option is
    used to specify a file containing one or more entry DNs, then it is not
    necessary to provide any DNs as command-line arguments.

    <br><br>
    The attribute-value assertion must be provided, as well as at least one
    entry DN either as a trailing argument or in a file specified with the
    <code>--filename</code> argument before the attribute-value assertion.  The
    complete set of named arguments that may be used with the
    <code>ldapcompare</code> utility is:

    <ul>
      <li>
        <code>-h</code> <i>{address}</i>
        <br>
        <code>--host</code> <i>{address}</i>
        <br><br>
        This argument specifies the address to use to communicate with the
        Directory Server.  It may be an IP address or a resolvable name.  If
        this is not provided, then a default value of "localhost" will be used.
        <br><br>
      </li>

      <li>
        <code>-p</code> <i>{port}</i>
        <br>
        <code>--port</code> <i>{port}</i>
        <br><br>
        This argument specifies the port to use to communicate with the
        Directory Server.  It should be an integer value between 1 and 65535,
        inclusive.  If this is not provided, then a default port of 389 will be
        used.
        <br><br>
      </li>

      <li>
        <code>-Z</code>
        <br>
        <code>--useSSL</code>
        <br><br>
        This argument indicates that the communication with the Directory
        Server should be protected using SSL.  If this option is provided, then
        the <code>--port</code> option should be used to specify the secure
        port for the server.  This argument must not be used in conjunction
        with the <code>--useStartTLS</code> option.  For more information about
        using SSL, see <a href="ssl-tls.html">this page</a>.
        <br><br>
      </li>

      <li>
        <code>-q</code>
        <br>
        <code>--useStartTLS</code>
        <br><br>
        This argument indicates that the communication with the Directory
        Server should be protected using the StartTLS extended operation.  This
        argument must not be used in conjunction with the <code>--useSSL</code>
        option.  For more information about using StartTLS, see
        <a href="ssl-tls.html">this page</a>.
        <br><br>
      </li>

      <li>
        <code>-D</code> <i>{dn}</i>
        <br>
        <code>--bindDN</code> <i>{dn}</i>
        <br><br>
        This argument specifies the DN to use when binding to the Directory
        Server through simple authentication.  It is not required when using
        SASL authentication or if no authentication is to be performed.
        <br><br>
      </li>

      <li>
        <code>-w</code> <i>{password}</i>
        <br>
        <code>--bindPassword</code> <i>{password}</i>
        <br><br>
        This argument specifies the password to use when authenticating to the
        Directory Server.  It is used for simple authentication, as well as for
        password-based SASL mechanisms like CRAM-MD5, DIGEST-MD5, and PLAIN.
        It is not required if no authentication is to be performed.  This
        option must not be used in conjunction with the
        <code>--bindPasswordFile</code> argument.
        <br><br>
      </li>

      <li>
        <code>-j</code> <i>{path}</i>
        <br>
        <code>--bindPasswordFile</code> <i>{path}</i>
        <br><br>
        This argument specifies the path to a file containing the password to
        use when authenticating to the Directory Server.  It is used for simple
        authentication, as well as for password-based SASL mechanisms like
        CRAM-MD5, DIGEST-MD5, and PLAIN.  It is not required if no
        authentication is to be performed.  This option must not be used in
        conjunction with the <code>--bindPassword</code> argument.
        <br><br>
      </li>

      <li>
        <code>-f</code> <i>{path}</i>
        <br>
        <code>--filename</code> <i>{path}</i>
        <br><br>
        This argument specifies the path to a file containing the DNs of one or
        more entries for which to perform the comparison.  If there are to be
        multiple entry DNs, then the file should be structured with one DN per
        line and all comparisons will be performed using the same connection to
        the server in the order they appear in the file.  If this option is
        used, then the only trailing argument needed will be the
        attribute-value assertion.  If this option is not provided, then at
        least one entry DN must follow the attribute-value assertion.
        <br><br>
      </li>

      <li>
        <code>-r</code>
        <br>
        <code>--useSASLExternal</code>
        <br><br>
        This argument specifies that the client should authenticate using the
        SASL EXTERNAL mechanism, which will attempt to identify the client
        using an SSL certificate that it presents to the Directory Server.  If
        this option is used, then the <code>--keyStorePath</code> argument must
        also be provided to specify the path to the client keystore, and either
        the <code>--useSSL</code> or the <code>--useStartTLS</code> option must
        be used to establish a secure communication channel with the server.
        <br><br>
      </li>

      <li>
        <code>-o</code> <i>{option}</i>
        <br>
        <code>--saslOption</code> <i>{option}</i>
        <br><br>
        This argument may be used to specify an option for use when performing
        SASL authentication.  Multiple SASL options may be provided by using
        this argument multiple times, once for each option.  See
        <a href="sasl-auth.html">this page</a> for more information on using
        SASL authentication in OpenDS clients.
        <br><br>
      </li>

      <li>
        <code>-X</code>
        <br>
        <code>--trustAll</code>
        <br><br>
        This argument indicates that the client should trust any SSL
        certificate that the server may present when performing secure
        communication with either SSL or the StartTLS extended operation.  This
        is convenient for testing purposes, but it is generally not recommended
        for use in a production environment because it could make the client
        susceptible to a man-in-the-middle attack.  If this option is not
        provided, then the <code>--trustStorePath</code> option should be used
        to specify the path to a trust store to consult in order to determine
        whether to trust a server certificate.
        <br><br>
      </li>

      <li>
        <code>-K</code> <i>{path}</i>
        <br>
        <code>--keyStorePath</code> <i>{option}</i>
        <br><br>
        This argument specifies the path to a client key store file that should
        be used for secure communication via SSL or the StartTLS extended
        operation.  This option is generally only required if the client needs
        to present its own certificate to the server, such as when performing
        SASL external authentication.
        <br><br>
      </li>

      <li>
        <code>-W</code> <i>{password}</i>
        <br>
        <code>--keyStorePassword</code> <i>{password}</i>
        <br><br>
        This argument specifies the password needed to access the contents of
        the client key store.  This is only required if the
        <code>--keyStorePath</code> option is used.  This option must not be
        used in conjunction with the <code>--keyStorePasswordFile</code>
        argument.
        <br><br>
      </li>

      <li>
        <code>--keyStorePasswordFile</code> <i>{path}</i>
        <br><br>
        This argument specifies the path to a file containing the password
        needed to access the contents of the client key store.  This is only
        required if the <code>--keyStorePath</code> option is used.  This
        option must not be used in conjunction with the
        <code>--keyStorePassword</code> argument.
        <br><br>
      </li>

      <li>
        <code>-P</code> <i>{path}</i>
        <br>
        <code>--trustStorePath</code> <i>{option}</i>
        <br><br>
        This argument specifies the path to a clien trust store file that
        should be used for secure communication via SSL or the StartTLS
        extended operation.  This argument is not needed if the
        <code>--trustAll</code> option is not used, although it is recommended
        that a trust store be used when working in a production environment.
        <br><br>
      </li>

      <li>
        <code>--trustStorePassword</code> <i>{password}</i>
        <br><br>
        This argument specifies the password needed to access the contents of
        the client trust store.  This is only required if the
        <code>--trustStorePath</code> option is used and the specified trust
        store requires a password in order to access its contents (most trust
        stores do not require this).  This option must not be used in
        conjunction with the <code>--trustStorePasswordFile</code>
        argument.
        <br><br>
      </li>

      <li>
        <code>--trustStorePasswordFile</code> <i>{path}</i>
        <br><br>
        This argument specifies the path to a file containing the password
        needed to access the contents of the client trust store.  This is only
        required if the <code>--trustStorePath</code> option is used and the
        specified trust store requires a password in order to access its
        contents (most trust stores do not require this).  This option must not
        be used in conjunction with the <code>--trustStorePassword</code>
        argument.
        <br><br>
      </li>

      <li>
        <code>--assertionFilter</code> <i>{filter}</i>
        <br><br>
        This argument specifies that the client should use the LDAP assertion
        control (as defined in 
        <a href="../../../standards/rfc4528.txt">RFC 4528</a>) to indicate that
        the operation should only be processed if the assertion contained in
        the provided filter is true.
        <br><br>
      </li>

      <li>
        <code>-J</code> <i>{controlSpec}</i>
        <br>
        <code>--control</code> <i>{controlSpec}</i>
        <br><br>
        This argument specifies that the client should include the specified
        control in search request(s) sent to the server.  This makes it
        possible to include arbitrary request controls that the client may not
        directly support.  The value for this argument must be in the form:
        <blockquote>
          <i>{oid}</i>[:<i>{criticality}</i>[:</i>{value}</i>|::<i>{b64value}</i>|:&lt;<i>{fileurl}</i>]]
        </blockquote>
        The elements of this value include:
        <ul>
          <li>"<i>{oid}</i>" -- This specifies the OID for the control.  For
              certain types of controls, a text name may be used instead of the
              numeric OID (for compare operations, the primary named control is
              "managedsait" for the manage DSA IT control).  This element must
              be provided.</li>
          <li>"<i>{criticality}</i>" -- This should be either
              "<code>true</code>" if the control should be marked critical
              (meaning that the server should not process the operation unless
              it can meet the requirements of this control) or
              "<code>false</code>" if the control should not be marked
              critical.  If this is not provided, then the control will not be
              marked critical.</li>
          <li>"<i>{value}</i>" -- This specifies the value for the control.
              This form should only be used if the value can be expressed as a
              string.  It must not be used in conjunction with either the
              "::<i>{b64value}</i>" or ":&lt;<i>{fileurl}</i>" forms.  If none
              of these options is present, then the control will not have a
              value.</li>
          <li>"<i>{b64value}</i>" -- This specifies the value for the control
              in base64-encoded form.  It must not be used in conjunction with
              either the ":<i>{value}</i>" or ":&lt;<i>{fileurl}</i>" forms.
              If none of these options is present, then the control will not
              have a value.</li>
          <li>"<i>{fileurl}</i>" -- This specifies a URL that references a file
              from which the value of the control should be taken.  It must not
              be used in conjunction with either the ":<i>{value}</i>" or
              "::<i>{b64value}</i>" forms.  If none of these options is
              present, then the control will not have a value.</li>
        </ul>
        For example, the value "<code>1.2.3.4:true:foo</code>" will include a
        critical control with an OID of "1.2.3.4" and a string value of "foo".
        <br><br>
      </li>

      <li>
        <code>-V</code> <i>{version}</i>
        <br>
        <code>--version</code> <i>{version}</i>
        <br><br>
        This argument specifies the LDAP protocol version that the client
        should use when communicating with the Directory Server.  The value
        must be either "2" (for LDAPv2 communication) or "3" (for LDAPv3).  If
        this argument is not provided, then the client will use LDAPv3.
        <br><br>
      </li>

      <li>
        <code>-i</code> <i>{charset}</i>
        <br>
        <code>--encoding</code> <i>{charset}</i>
        <br><br>
        This argument specifies the character set that the client will use to
        interpret the information that should be used to generate the search
        request.  If this is not provided, then a default of "UTF-8" will be
        used.
        <br><br>
      </li>

      <li>
        <code>-a</code> <i>{policy}</i>
        <br>
        <code>--dereferencePolicy</code> <i>{policy}</i>
        <br><br>
        This argument specifies the policy that should be requested when
        attempting to dereference aliases.  The value must be one of "never",
        "always", "search", or "find".  If this argument is not provided, then
        a default of "never" will be used.
        <br><br>
      </li>

      <li>
        <code>-c</code>
        <br>
        <code>--continueOnError</code>
        <br><br>
        This argument indicates that the client should continue processing even
        if an error occurs.  This applies primarily in the case in which
        multiple entry DNs have been given either as trailing arguments or in
        a file specified with the <code>--filename</code> option.  If an error
        occurs while processing a compare request, then the client will
        continue with the next entry DN if the <code>--continueOnError</code>
        argument has been provided, or it will exit with an error if that
        argument was not given.
        <br><br>
      </li>

      <li>
        <code>-n</code>
        <br>
        <code>--noop</code>
        <br><br>
        This argument indicates that the client should report what it would do
        but should not actually perform any searches or communicate with the
        server in any way.
        <br><br>
      </li>

      <li>
        <code>-v</code>
        <br>
        <code>--verbose</code>
        <br><br>
        This argument indicates that the client should provide verbose
        information about the processing that it is performing and the
        interaction that it has with the server.
        <br><br>
      </li>

      <li>
        <code>-H</code>
        <br>
        <code>--help</code>
        <br><br>
        This argument will display usage information for the
        <code>ldapsearch</code> utility and will exit without attempting to
        perform any additional processing.
        <br><br>
      </li>
    </ul>
  </body>
</html>

