<!DOCTYPE html PUBLIC "-//Tigris//DTD XHTML 1.0 Transitional//EN" "http://style.tigris.org/nonav/tigris_transitional.dtd">
<html>
<head>
<link rel="SHORTCUT ICON" href="https://opends.dev.java.net/public/images/opends_favicon.gif">
<style type="text/css"> 
/* <![CDATA[ */
 @import "/branding/css/tigris.css";
 @import "/branding/css/inst.css";
 /* ]]> */
</style>
<link rel="stylesheet" type="text/css" href="/branding/css/print.css" media="print" />
<link rel="stylesheet" href="../../../css/opends.css" type="text/css">
<title>OpenDS Directory Server - Quick Reference Guide</title>
</head>
<body>
<table class="tertmasttable" width="100%" cellspacing="0">
  <tbody>
    <tr>
      <td><div class="collectionheader">Command Line Usage Guide</div></td>
      <td width="10%"><a href="https://opends.dev.java.net/"><img src="../../../images/opends_logo_sm.png" alt="OpenDS Logo" width="104" height="33" border="0" align="middle"></a> </td>
    </tr>
  </tbody>
</table>
<hr noshade size="1" >
    <div align="right"><a href="index.html">Return to Command List</a></div>
    <div class="secpageheader">The stop-ds Utility</div>

    <br>
    The <code>stop-ds</code> utility may be used to stop or restart the
    Directory Server.  It may operate on either a local or remote Directory
    Server instance.

    <br><br>
    The ability to perform a local stop of the server is currently only
    available on UNIX-based systems.  It operates by sending a kill signal to
    the Directory Server process.  This method of stopping the server will be
    used if the <code>stop-ds</code> utility is run without any arguments and
    a PID file (<code>logs/server.pid</code>) exists.

    <br><br>
    The remote shutdown mechanism uses an LDAP request to create a task entry
    in the Directory Server.  Because it uses LDAP, it may be run from any
    system that can communicate with the Directory Server (local or remote).
    It may also be used to request that the server restart after it has
    completed the shutdown but before the JVM has exited.  This is also called
    an "in-core" restart.

    <br><br>
    As mentioned above, the local shutdown mechanism will only be used on
    UNIX-based systems if no arguments are provided.  If any arguments are
    given, then the remote mechanism will be used.  The arguments available in
    this mode include:

    <ul>
      <li>
        <code>-h</code> <i>{host}</i>
        <br>
        <code>--host</code> <i>{host}</i>
        <br><br>
        This argument specifies the address of the Directory Server to stop.
        It may be either an IP address or a resolvable name.  If it is not
        provided, then a default address of "localhost" will be used.
        <br><br>
      </li>

      <li>
        <code>-p</code>
        <br>
        <code>--port</code>
        <br><br>
        This argument specifies the port number of the Directory Server to
        stop.  If it is not provided, then a default port of 389 will be used.
        <br><br>
      </li>

      <li>
        <code>-Z</code>
        <br>
        <code>--useSSL</code>
        <br><br>
        This argument indicates that the communication with the Directory
        Server should be protected with SSL.  If SSL is to be used, then the
        <code>--port</code> argument should be used to specify the server's
        secure port.  See <a href="ssl-tls.html">this page</a> for more
        information on using SSL in OpenDS clients.
        <br><br>
      </li>

      <li>
        <code>-q</code>
        <br>
        <code>--useStartTLS</code>
        <br><br>
        This argument indicates that the communication with the Directory
        Server should be protected with the StartTLS extended operation.  This
        option must not be used in conjunction with the <code>--useSSL</code>
        argument.  See <a href="ssl-tls.html">this page</a> for more
        information on using StartTLS in OpenDS clients.
        <br><br>
      </li>

      <li>
        <code>-D</code> <i>{bindDN}</i>
        <br>
        <code>--bindDN</code> <i>{bindDN}</i>
        <br><br>
        This argument specifies the DN to use to bind to the Directory Server.
        This is used when performing simple authentication and is not required
        if SASL authentication is to be used.
        <br><br>
      </li>

      <li>
        <code>-w</code> <i>{password}</i>
        <br>
        <code>--bindPassword</code> <i>{password}</i>
        <br><br>
        This argument specifies the password to use when authenticating to the
        Directory Server.  This may be used for simple authentication as well
        as password-based SASL mechanisms.
        <br><br>
      </li>

      <li>
        <code>-j</code> <i>{path}</i>
        <br>
        <code>--bindPasswordFile</code> <i>{path}</i>
        <br><br>
        This argument specifies the path to a file containing the password to
        use when authenticating to the Directory Server.  This option must not
        be used in conjunction with the <code>--bindPassword</code> argument.
        <br><br>
      </li>

      <li>
        <code>-r</code> <i>{reason}</i>
        <br>
        <code>--stopReason</code> <i>{reason}</i>
        <br><br>
        This argument may be used to specify a human-readable reason for the
        shutdown.  If a reason is provided, it may appear in the server's error
        log, and will be provided to shutdown plugins and shutdown listeners.
        <br><br>
      </li>

      <li>
        <code>-R</code>
        <br>
        <code>--restart</code>
        <br><br>
        This argument indicates that the server should be restarted rather than
        shut down.  This will perform an "in-core" restart, in which the server
        will reinitialize itself without shutting down the JVM.  Because the
        JVM is not stopped, any configuration changes that require a JVM
        restart will not take effect.
        <br><br>
      </li>

      <li>
        <code>-t</code> <i>{time}</i>
        <br>
        <code>--stopTime</code> <i>{time}</i>
        <br><br>
        This argument may be used to specify the time that the server should
        begin the shutdown process.  The value of this argument should be in
        the format YYYYMMDDhhmmss for local time, or YYYYMMDDhhmmssZ for UTC
        time.  For example, a value of "20060728143624" refers to July 28, 2006
        at 14:36:24 in the local timezone configured on the server system.  A
        value of "20060728193624Z" refers to July 28, 2006 at 19:36:24 in UTC
        time.  If this argument is not provided, then the shutdown process will
        begin immediately.
        <br><br>
      </li>

      <li>
        <code>-o</code> <i>{saslOption}</i>
        <br>
        <code>--saslOption</code> <i>{saslOption}</i>
        <br><br>
        This argument may be used to specify parameters for use in SASL
        authentication.  See <a href="sasl-auth.html">this page</a> for more
        information on using SASL authentication in the OpenDS LDAP clients.
        <br><br>
      </li>

      <li>
        <code>-Y</code> <i>{authzID}</i>
        <br>
        <code>--proxyAs</code> <i>{authzID}</i>
        <br><br>
        This argument may be used to indicate that the proxied authorization
        control should be included in the shutdown request.  The value
        provided for this argument should be an authorization ID, which may be
        in the form "dn:" followed by a user DN or "u:" followed by a username.
        Clients will use the proxied authorization v2 control as described in
        <a href="../../../standards/rfc4370.txt">RFC 4370</a>.
        <br><br>
      </li>

      <li>
        <code>-X</code>
        <br>
        <code>--trustAll</code>
        <br><br>
        This argument indicates that the client should trust any certificate
        that the server might present during SSL or StartTLS negotiation.  This
        may be used for convenience and testing purposes, but for security
        reasons it is recommended that a trust store be used to determine
        whether the client should accept the server certificate.
        <br><br>
      </li>

      <li>
        <code>-K</code> <i>{path}</i>
        <br>
        <code>--keyStoreFile</code> <i>{path}</i>
        <br><br>
        This argument may be used to specify the path to the certificate
        keystore that the client may use when communicating with the server.
        This should generally only be necessary if the client needs to present
        a certificate to the server, for example when using SASL EXTERNAL
        authentication.
        <br><br>
      </li>

      <li>
        <code>-W</code> <i>{password}</i>
        <br>
        <code>--keyStorePassword</code> <i>{password}</i>
        <br><br>
        This argument may be used to specify the PIN needed to access the
        contents of the certificate keystore.
        <br><br>
      </li>

      <li>
        <code>-u</code> <i>{path}</i>
        <br>
        <code>--keyStorePaswordFile</code> <i>{path}</i>
        <br><br>
        This argument may be used to specify the path to a file containing the
        PIN needed to access the contents of the certificate keystore.  This
        option must not be used in conjunction with the
        <code>--keyStorePassword</code> argument.
        <br><br>
      </li>

      <li>
        <code>-P</code> <i>{path}</i>
        <br>
        <code>--trustStoreFile</code> <i>{path}</i>
        <br><br>
        This argument may be used to specify the path to the certificate trust
        store that the client should use in the process of determining whether
        to trust the server certificate.
        <br><br>
      </li>

      <li>
        <code>-T</code> <i>{password}</i>
        <br>
        <code>--trustStorePassword</code> <i>{password}</i>
        <br><br>
        This argument may be used to specify the PIN needed to access the
        contents of the certificate trust store.  In most cases, the
        certificate trust store should not require a PIN.
        <br><br>
      </li>

      <li>
        <code>-U</code> <i>{path}</i>
        <br>
        <code>--trustStorePaswordFile</code> <i>{path}</i>
        <br><br>
        This argument may be used to specify the path to a file containing the
        PIN needed to access the contents of the certificate trust store.  This
        option must not be used in conjunction with the
        <code>--trustStorePassword</code> argument.
        <br><br>
      </li>

      <li>
        <code>-H</code>
        <br>
        <code>--help</code>
        <br><br>
        This argument will display usage information for the
        <code>stop-ds</code> utility and exit without making any attempt to
        stop or restart the server.
        <br><br>
      </li>
    </ul>
  </body>
</html>

