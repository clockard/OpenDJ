<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at legal-notices/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2011-2015 ForgeRock AS.
  !
-->
<chapter xml:id='chap-install-gui'
         xmlns='http://docbook.org/ns/docbook' version='5.0' xml:lang='en'
         xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
         xsi:schemaLocation='http://docbook.org/ns/docbook
                             http://docbook.org/xml/5.0/xsd/docbook.xsd'
         xmlns:xlink='http://www.w3.org/1999/xlink'
         xmlns:xinclude='http://www.w3.org/2001/XInclude'>
 <title>Installing OpenDJ With a Graphical Installer</title>
 <indexterm><primary>Downloading OpenDJ</primary></indexterm>
 <indexterm><primary>Quick install</primary></indexterm>
 
 <para>If you want only to try OpenDJ server software, and you do not plan to
 store any real or important data that you want to keep, then read only this
 chapter, or just try out installation without reading any further.</para>

 <xinclude:include href="../shared/itemizedlist-download.xml" />

 <section xml:id="install-gui-quick-setup">
  <title>Installing OpenDJ With the QuickSetup Wizard</title>

  <para>
   The OpenDJ QuickSetup wizard provides a graphical user interface
   for installing OpenDJ directory server.
  </para>

  <para>
   To begin installation, download OpenDJ-${docTargetVersion}.zip,
   unzip the file,
   and then run the
   <link
    xlink:show="new"
    xlink:href="reference#setup-1"
    xlink:role="http://docbook.org/xlink/role/olink"
    ><command>setup</command></link> command,
   <command>opendj/setup</command> (UNIX),
   <command>opendj\setup.bat</command> (Windows),
   or <command>opendj/QuickSetup.app</command> (Mac OS X).
  </para>

  <note>
   <para>
    If your environment picks up an old installation of Java,
    installation can fail.
    You might see an application error due to an old Java version.
   </para>

   <para>
    If your default Java environment is not appropriate,
    set <literal>OPENDJ_JAVA_HOME</literal>
    to the path to the correct Java environment,
    or set <literal>OPENDJ_JAVA_BIN</literal>
    to the absolute path of the <command>java</command> command.
    The latter environment variable is useful for example
    if you have both 32-bit and 64-bit versions of the Java environment installed,
    and want to make sure you use the 64-bit version.
   </para>
  </note>

  <itemizedlist>
   <para>
    The QuickSetup wizard presents the following screens:
   </para>

   <listitem>
    <para>
     <emphasis>Welcome</emphasis>: summarizes the setup process
     and indicates the minimum required Java version
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>License</emphasis>: presents the license agreement to accept
     before installing OpenDJ software
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>Server Settings</emphasis>: prompts for basic server settings
     including installation path, host name, port numbers, secure connections,
     and credentials for the directory superuser
     (default bind DN: <literal>cn=Directory Manager</literal>)
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>Topology Options</emphasis>: prompts for data replication options
     including whether this server is part of a replication topology,
     and if so the port number and security settings for this server,
     as well as the connection settings for a remote replica if available
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>Directory Data</emphasis>: allows you to import or to generate
     LDAP directory data as part of the setup process
    </para>

    <para>
     This screen also allows you to select the backend type for data storage.
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>Runtime Options</emphasis>: allows you to adjust
     JVM settings as part of the setup process,
     for example to allow OpenDJ to use more memory if necessary
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>Review</emphasis>: presents current selections
     so that you can check everything is correct before running setup,
     with the option to start OpenDJ directory server after setup completes
    </para>
   </listitem>

   <listitem>
    <para>
     <emphasis>Finished</emphasis>: summarizes how setup completed,
     with the option to launch the OpenDJ Control Panel
    </para>
   </listitem>
  </itemizedlist>

  <para>
   <xref linkend="figure-quicksetup-control-panel" />
   shows the top-level window with status information.
   OpenDJ Control Panel helps to manage directory data, LDAP schema, indexes,
   monitoring, and JVM runtime options through a graphical user interface.
  </para>

  <figure xml:id="figure-quicksetup-control-panel">
   <title>OpenDJ Control Panel</title>

   <mediaobject>
    <imageobject>
     <imagedata fileref="images/OpenDJ-Control-Panel.png" format="PNG" />
    </imageobject>
     <textobject>
      <para>OpenDJ Control Panel offers basic administration capabilities.</para>
     </textobject>
   </mediaobject>
  </figure>
 </section>

 <section xml:id="install-gui-windows-msi">
  <title>Installing OpenDJ From the Windows Installer Package</title>

  <para>
   You can start installing OpenDJ directory server on Windows systems
   from the Windows installer package,
   <filename>OpenDJ-${docTargetVersion}.msi</filename>.
  </para>

  <indexterm><primary>Windows installer (.msi) package</primary></indexterm>

  <procedure xml:id="install-gui-windows-msi-steps">
   <title>To Install OpenDJ From the Windows Installer Package</title>

   <para>
    Installing OpenDJ directory server by using the Windows installer package
    is a two-stage process.
    First, you install the files by using the Windows installer package wizard.
    Second, you configure OpenDJ by using the <command>setup</command> command.
   </para>

   <step>
    <para>
     Prevent anti-virus and intrusion detection systems from interfering
     with OpenDJ directory server.
    </para>

    <xinclude:include href="../shared/para-disable-anti-virus.xml" />
   </step>

   <step>
    <para>
     Install OpenDJ files in one of the following ways.
    </para>

    <stepalternatives>
     <step>
      <substeps>
       <step>
        <para>
         Double-click the Windows installer package,
         <filename>OpenDJ-${docTargetVersion}.msi</filename>,
         to start the install wizard.
        </para>
       </step>

       <step>
        <para>
         In the Destination Folder screen, set the folder
         where the wizard installs OpenDJ directory server files.
        </para>

        <para>
         The default location is under Program Files on the system drive.
         For example if the system drive is C:, the default location is
         <filename>C:\Program Files (x86)\OpenDJ\</filename>,
         as the native executable is a 32-bit application,
         though you can run OpenDJ directory server
         with a 64-bit Java environment.
        </para>
       </step>
      </substeps>
     </step>

     <step>
      <para>
       Use the Microsoft <command>msiexec.exe</command> command
       to install the files.
      </para>

      <para>
       The following example installs OpenDJ directory server files under
       <filename>C:\OpenDJ-${docTargetVersion}</filename>,
       writing an installation log file, <filename>install.log</filename>,
       in the current folder.
      </para>

      <screen>
C:\><userinput>msiexec /i OpenDJ-${docTargetVersion}.msi /l* install.log /q OPENDJ=C:\OpenDJ-${docTargetVersion}</userinput>
      </screen>
     </step>
    </stepalternatives>
   </step>

   <step>
    <para>
     Start the installation.
    </para>

    <para>
     When installation is finished, OpenDJ directory server files
     are found in the location you specified as Destination Folder.
     You must still run the <command>setup</command> command
     before you can use OpenDJ directory server.
    </para>
   </step>

   <step>
    <para>
     Browse to the Destination Folder,
     and double-click the <command>setup</command> command
     to start the OpenDJ QuickSetup wizard
     and following the instructions on screen
     as described in <xref linkend="install-gui-quick-setup" />.
    </para>
   </step>
  </procedure>
 </section>

 <section xml:id="install-launch-control-panel">
  <title>Starting OpenDJ Control Panel</title>

  <para>
   You might close OpenDJ Control Panel,
   or decide to start it later after closing the QuickSetup wizard.
  </para>

  <itemizedlist>
   <para>
    To launch OpenDJ Control Panel again later, run the
    <link
     xlink:show="new"
     xlink:href="reference#control-panel-1"
     xlink:role="http://docbook.org/xlink/role/olink"
    ><command>control-panel</command></link> command.
    Depending on your host system, this command is one of the following.
   </para>

   <listitem>
    <para>(Mac OS X) <command>/path/to/opendj/bin/ControlPanel.app</command></para>
   </listitem>
   <listitem>
    <para>(UNIX) <command>/path/to/opendj/bin/control-panel</command></para>
   </listitem>
   <listitem>
    <para>(Windows) <command>C:\path\to\opendj\bat\control-panel.bat</command></para>
   </listitem>
  </itemizedlist>
 </section>
</chapter>
